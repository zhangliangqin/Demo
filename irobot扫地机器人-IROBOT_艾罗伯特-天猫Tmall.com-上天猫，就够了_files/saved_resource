KISSY.add("mui/wishlist/wishlist",function(e){var s=window.location.hostname.indexOf(".net")>-1,i;var n=function(s,i,n,t,a){if(e.isFunction(n)){a=t;t=n;n=undefined}return new s({type:"get",url:i,data:n,success:t,dataType:"jsonp",scriptCharset:a||"GBK"})};function t(s,n){n=n||{};var t=n.width=n.width||440,a=n.height||260;delete n.height;e.use("mui/overlay",function(e,o){if(i)i.destroy();i=new o.Dialog(e.mix({width:t,headerContent:"\u6536\u85cf\u5546\u54c1",bodyContent:'<iframe src="'+s+'" width="'+t+'" height="'+a+'" frameborder="0" scrolling="no"></iframe>',mask:false,skin:"gray",align:{points:["cc","cc"]},showCat:false},n));i.render();i.show()})}function a(){}e.mix(a,{addItem:function(i){if(!i||!i.ids){return}if(arguments[1]){i.success=arguments[1]}var t=i.ids.join?i.ids.join(","):i.ids+"";e.use("ajax",function(e,a){n(a,"//favorite."+(s?"daily.taobao.net":"taobao.com")+"/json/add_collection_for_cart.htm",{itemSkuList:t,itemtype:1,_tb_token_:i.token||""},function(e){i.success&&i.success(e.result)})})},addItemPopup:function(i){if(!i||!i.ids){return}var n=i.ids.join?i.ids.join(","):i.ids+"";var a="//favorite."+(s?"daily.taobao.net":"taobao.com")+"/popup/add_collection.htm"+"?itemtype=1&isTmall=1&scjjc=1&id="+n+"&_tb_token_="+(i.token||"")+"&t="+e.now();t(a,i.dialogConfig)},addShop:function(e){if(arguments[1]){e.success=arguments[1]}e.error&&e.error({code:-1,message:"\u6682\u4e0d\u652f\u6301"})},addShopPopup:function(i){if(!i||!i.ids){return}var n=i.ids.join?i.ids.join(","):i.ids+"";var a="//favorite."+(s?"daily.taobao.net":"taobao.com")+"/popup/add_collection.htm"+"?itemtype=0&isTmall=1&scjjc=1&id="+n+"&_tb_token_="+(i.token||"")+"&t="+e.now();t(a,i.dialogConfig)},addBrand:function(i){if(!i||!i.ids){return}if(arguments[1]){i.success=arguments[1]}var t=i.ids.join?i.ids.join(","):i.ids+"";e.use("ajax",function(e,a){n(a,i.addServer||"//brand."+(s?"daily.tmall.net":"tmall.com")+"/ajax/brandAddToFav.htm",{brandId:t,_tb_token_:i.token},function(e){e=e||{};if(e.is_success=="T"){i.success&&i.success()}else if(i.error){var s;if(e.is_success=="E"){s={code:-1,message:"\u60a8\u5df2\u7ecf\u5173\u6ce8\u8fc7\u8be5\u54c1\u724c\uff01"}}else if(e.is_success=="O"){s={code:-3,message:"\u8bf7\u5148\u767b\u5f55\uff01"}}else{s={code:-2,message:"\u5173\u6ce8\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01"}}i.error(s)}})})},removeBrand:function(i){if(!i||!i.ids){return}if(arguments[1]){i.success=arguments[1]}var t=i.ids.join?i.ids.join(","):i.ids+"";e.use("ajax",function(e,a){n(a,i.removeServer||"//brand."+(s?"daily.tmall.net":"tmall.com")+"/ajax/brandDelFromFav.htm",{brandId:t,_tb_token_:i.token},function(e){e=e||{};if(e.is_success=="T"){i.success&&i.success()}else if(i.error){var s;if(e.is_success=="E"){s={code:-1,message:"\u60a8\u6ca1\u6709\u5173\u6ce8\u8fc7\u8be5\u54c1\u724c\uff01"}}else if(e.is_success=="O"){s={code:-3,message:"\u8bf7\u5148\u767b\u5f55\uff01"}}else{s={code:-2,message:"\u53d6\u6d88\u5173\u6ce8\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01"}}i.error(s)}})})},queryBrand:function(i){if(!i||!i.ids){return}if(arguments[1]){i.success=arguments[1]}var t=i.ids.join?i.ids.join(","):i.ids+"";e.use("ajax",function(e,a){n(a,i.queryServer||"//brand."+(s?"daily.tmall.net":"tmall.com")+"/ajax/getBrandStatusBatch.htm",{brandId:t},function(e){e=e||{};if(e.isSuccess){i.success&&i.success(e)}else if(i.error){var s={code:0,message:"\u53d6\u6d88\u5173\u6ce8\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01"};i.error(s)}})})}});return a});